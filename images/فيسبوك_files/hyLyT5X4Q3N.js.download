if (self.CavalryLogger) { CavalryLogger.start_js(["EuZKG"]); }

__d("CometViewportTrackingOnBlueStories.react",["csx","Arbiter","Event","LitestandMessages","React","StreamViewportTracking","debounce","shallowArrayEqual"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("React");var i=c.useCallback,j=c.useEffect,k=c.useMemo,l=c.useRef,m=c.useState;function a(a){var c=a.trackingConfig,d=a.feedContainer,e=a.children,f=a.recordDelay,g=l(!1),n=k(function(){return b("StreamViewportTracking").getBehavior(c,d,"._5jmm",51,function(a){a=a.getAttribute("data-dedup");return a!=null&&a.length>0?a:null})},[d,c]);a=m(function(){return n.getAllStories()});var o=a[0],p=a[1],q=k(function(){return b("debounce")(function(){p(function(a){var c=n.getAllStories();return b("shallowArrayEqual")(a,c)?a:c})},f)},[n,f]),r=i(function(){if(!g.current){var a=n.getAllStories();a.length>0&&(g.current=!0,q())}},[n,q]);j(function(){var a=b("Arbiter").subscribe(["Stream/totalHeadLoadedStories",b("LitestandMessages").STORIES_INSERTED],function(){g.current&&q()});return function(){return a.unsubscribe()}},[q]);j(function(){var a=b("Event").listen(window,"scroll",r),c=b("Event").listen(window,"resize",r);return function(){a.remove(),c.remove()}},[r]);return h.jsx(h.Fragment,{children:o.map(function(a,b){return e(a,(a=n.getStoryID(a))!=null?a:"story-"+b,b,n)})})}e.exports=a}),null);
__d("useCometStoryVPVDLoggerOnBlue",["requireDeferred","CometInteractionSourceContext","InteractionSource","LitestandStream","React","gkx","useVPVDImpression"],(function(a,b,c,d,e,f){"use strict";var g=b("requireDeferred")("Banzai");c=b("React");var h=c.useCallback,i=c.useContext,j=c.useRef,k=Object.keys(b("InteractionSource")).reduce(function(a,c){a[b("InteractionSource")[c]]=c;return a},{}),l=function(a){var c=b("LitestandStream").isReady()?b("LitestandStream").getFeedStreamID():null;return{csp:a.storyPosition,logged_before:a.loggedBefore,sid:c,source:a.source,storyId:a.id,story_height:a.story_height,story_width:a.story_width,vpvd_start_timestamp_ms:a.visibleTime,vpvd_time_delta_ms:a.hiddenTime-((c=a.visibleTime)!=null?c:0),ft:a.ft}};function a(a,c,d,e){var f=(e=e)!=null?e:i(b("CometInteractionSourceContext"));e=k[f];var m="STORYID-"+a+"-"+e+"-"+(c||"").slice(0,15),n=j(null),o=j(null),p=j(!1);e=h(function(a){var b;a=a.entry;n.current=(b=a==null?void 0:(b=a.boundingClientRect)==null?void 0:b.height)!=null?b:null;o.current=(a=a==null?void 0:(b=a.boundingClientRect)==null?void 0:b.width)!=null?a:null},[]);c=h(function(b){var c=b.hiddenTime;b=b.visibleTime;var e=n.current!=null?Math.round(n.current):null,h=o.current!=null?Math.round(o.current):null,i=l({ft:d(),hiddenTime:c,id:m,loggedBefore:p.current,source:f,storyPosition:a,story_height:e,story_width:h,visibleTime:b});p.current=!0;g.onReady(function(a){a.post("comet_metrics_on_blue:vpvd",i)})},[d,m,f,a]);return b("useVPVDImpression")({onVPVDStart:e,onVPVDEnd:c})}e.exports=a}),null);
__d("CometViewportTrackingOnBlueStoryTracker.react",["requireCond","cr:1190322","React","collectDataAttributes","useCometStoryVPVDLoggerOnBlue"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useLayoutEffect,j=c.useMemo;function k(a,b){if(a==null)return;if(typeof a==="function"){a(b);return}if(typeof a==="object"){a.current=b;return}}function a(a){var c=a.behavior,d=a.position,e=a.storyElement;a.storyId;a=h(function(){var a=c.getDataToLog(e),d=b("collectDataAttributes")(e,["ft"]);a=babelHelpers["extends"]({},a.ft,d.ft);a.ei&&delete a.ei;return JSON.stringify(a)},[c,e]);var f=j(function(){var a=b("collectDataAttributes")(e,["ft"]);return a.ft.mf_story_key+"-"+a.ft.qid},[e]);d=b("useCometStoryVPVDLoggerOnBlue")(d,f,a);var l=d[0];f=d[1];k(l,e);i(function(){k(l,e);return function(){k(l,null)}},[e,l]);return b("cr:1190322")!=null?g.jsx(b("cr:1190322"),{storyElement:e,children:f}):null}e.exports=a}),null);
__d("CometViewportTrackingOnBlue",["CometInteractionSourceContext","CometOnBlueHiddenSubtreePassiveContextProvider.react","CometOnBlueViewPortMarginsProvider.react","CometViewportTrackingOnBlueStories.react","CometViewportTrackingOnBlueStoryTracker.react","DOM","React","ReactRenderer","gkx"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){var c=a.feedContainer,d=a.interactionSource,e=a.recordDelay;a=a.trackingConfig;return g.jsx(b("CometInteractionSourceContext").Provider,{value:d,children:g.jsx(b("CometOnBlueViewPortMarginsProvider.react"),{children:g.jsx(b("CometOnBlueHiddenSubtreePassiveContextProvider.react"),{children:g.jsx(b("CometViewportTrackingOnBlueStories.react"),{trackingConfig:a,feedContainer:c,recordDelay:e,children:function(a,c,d,e){return g.jsx(b("CometViewportTrackingOnBlueStoryTracker.react"),{behavior:e,position:d,storyElement:a,storyId:c},c+"-"+d)}})})})})}a={_mountPoint:null,init:function(a){var c=a.trackingConfig,d=a.feedContainer,e=a.interactionSource;a=a.recordDelay;this._mountPoint==null&&(this._mountPoint=b("DOM").create("div",{className:b("gkx")("894204")?"":"hidden_elem"}),document.body!=null&&document.body.appendChild(this._mountPoint));b("ReactRenderer").renderComponent(g.jsx(h,{feedContainer:d,interactionSource:e,recordDelay:a,trackingConfig:c}),this._mountPoint)}};e.exports=a}),null);